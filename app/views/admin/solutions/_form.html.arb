active_admin_form_for [:admin, resource], builder: Admin::EnhancedFormBuilder do |f|
  f.semantic_errors *f.object.errors.map(&:attribute).uniq

  panel "Organization Required" do
    para <<~HTML.html_safe
    When creating a solution, an organization is required in the <strong>Private Attributes</strong> tab. If you need to,
    #{link_to("create a new organization", new_admin_organization_path, target: "_blank", rel: "noopener")}
    <em>before</em> completing this form.
    HTML
  end if f.object.new_record?

  tabs do
    render("admin/solutions/shared_form_tabs", context: self, f:)

    tab "Private Attributes" do
      f.inputs "Ownership" do
        f.input :organization, as: :select, collection: Organization.to_select_options, required: true, include_blank: true
      end
    end
  end

  f.actions
end
